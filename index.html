<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NOVATREX Exchange</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body{margin:0;font-family:Poppins;background:#0f1320;color:white;}
.header{display:flex;justify-content:space-between;align-items:center;padding:12px 15px;background:#12162a;}
.logo{width:40px;height:40px;background:linear-gradient(45deg,#00c6ff,#0072ff);border-radius:10px;margin-right:10px;}
.header b{font-size:20px;color:#00e0ff;}
.button-auth{padding:8px 18px;border:none;border-radius:8px;background:linear-gradient(45deg,#00c6ff,#00ffcc);color:white;font-weight:600;cursor:pointer;}
.balance{background:#1b1f33;margin:15px;padding:20px;border-radius:15px;position:relative;}
.deposit-btn{position:absolute;top:15px;right:15px;background:linear-gradient(45deg,#00c6ff,#00ffcc);padding:8px 14px;border-radius:10px;cursor:pointer;}
.icon-grid{display:grid;grid-template-columns:repeat(4,1fr);text-align:center;margin-top:70px;}
.icon-grid div{font-size:12px;padding:10px;cursor:pointer;background:#171b2e;border-radius:8px;}
.banner{background:#1b1f33;margin:15px;border-radius:15px;padding:15px;}
.market{background:#1b1f33;margin:15px;padding:15px;border-radius:15px;}
.wallet{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #2a2f45;}
.history{background:#1b1f33;margin:15px;padding:15px;border-radius:15px;max-height:180px;overflow-y:auto;}
.footer{position:fixed;bottom:0;width:100%;background:#12162a;display:flex;justify-content:space-around;padding:10px 0;}
.footer div{font-size:12px;cursor:pointer;display:flex;flex-direction:column;align-items:center;color:#ccc;}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);display:none;justify-content:center;align-items:center;}
.modal-box{background:#1b1f33;padding:20px;border-radius:12px;width:90%;max-width:320px;}
.modal-box input{width:100%;padding:10px;margin:6px 0;border-radius:8px;border:none;background:#2a2f45;color:white;}
.modal-box button{width:100%;padding:10px;background:linear-gradient(45deg,#00c6ff,#00ffcc);border:none;color:white;border-radius:8px;}
.auth-tabs{display:flex;justify-content:space-around;margin-bottom:10px;}
.auth-tabs button{flex:1;margin:0 5px;padding:8px;border-radius:8px;border:none;font-weight:600;cursor:pointer;}
.auth-tabs button.active{background:#00c6ff;color:#12162a;}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
<div style="display:flex;align-items:center">
<div class="logo"></div>
<b>NOVATREX</b>
</div>
<button class="button-auth" onclick="showAuthModal()">
<i class="fas fa-right-to-bracket"></i> Connexion / Créer Compte
</button>
</div>

<!-- BALANCE -->
<div class="balance">
<h4>Balance (USDT)</h4>
<h1 id="balance">0.00</h1>
<p id="profitBox">Profit Signals: 0 USDT</p>

<div class="deposit-btn" onclick="showDeposit()">Deposit</div>

<div class="icon-grid">
<div onclick="invite()">Invitation</div>
<div onclick="showWithdraw()">Withdraw</div>
<div onclick="cert()">Certification</div>
<div onclick="recharge()">Recharge</div>
</div>
</div>

<!-- MARKET -->
<div class="market">
<h3>Best Movements</h3>
<div class="wallet">Novacoin <span id="novacoinPrice">1.00</span></div>
<div class="wallet">BTC/USDT <span id="btc">Loading...</span></div>
<div class="wallet">ETH/USDT <span id="eth">Loading...</span></div>
</div>

<!-- HISTORY -->
<div class="history" id="history">
<h4>Recent Activities</h4>
</div>

<!-- FOOTER -->
<div class="footer">
<div>Home</div>
<div>Market</div>
<div>Trade</div>
<div>Delivery</div>
<div>Wallet</div>
</div>

<!-- AUTH MODAL -->
<div class="modal" id="authModal">
<div class="modal-box">
<div class="auth-tabs">
<button id="loginTab" class="active" onclick="switchAuth('login')">Connexion</button>
<button id="registerTab" onclick="switchAuth('register')">Créer Compte</button>
</div>

<input id="authEmail" placeholder="Email">
<input id="authPass" type="password" placeholder="Password">
<button onclick="authUser()">Submit</button>
</div>
</div>

<!-- DEPOSIT -->
<div class="modal" id="depositModal">
<div class="modal-box">
<h3>Deposit</h3>
<input id="depositAmount" placeholder="Amount">
<button onclick="deposit()">Confirm</button>
</div>
</div>

<!-- WITHDRAW -->
<div class="modal" id="withdrawModal">
<div class="modal-box">
<h3>Withdraw</h3>
<input id="withdrawAmount" placeholder="Amount">
<button onclick="withdrawConfirm()">Confirm</button>
</div>
</div>

<script>

let users=JSON.parse(localStorage.getItem("users")||"{}");

if(!users['admin@novatrex.com']){
users['admin@novatrex.com']={password:'admin',balance:50000,uid:1,admin:true,referrals:[],signals:0,profit:0,joinDate:Date.now()};
}

let currentUser=null;
let historyLog=[];

function showAuthModal(){authModal.style.display="flex";}

function switchAuth(tab){
loginTab.classList.remove('active');
registerTab.classList.remove('active');
if(tab==='login')loginTab.classList.add('active');
else registerTab.classList.add('active');
}

function authUser(){

let email=authEmail.value.trim();
let pass=authPass.value.trim();

if(!email||!pass)return alert("Fill all fields");

if(loginTab.classList.contains('active')){

if(users[email]&&users[email].password===pass){
currentUser=email;
updateBalance();
authModal.style.display="none";
}else alert("Wrong login");

}else{

let code=prompt("Enter invitation code");

if(!code)return alert("Invitation required");

let inviter=Object.values(users).find(u=>u.uid==code);

if(!inviter)return alert("Invalid code");

if(users[email])return alert("Email used");

users[email]={
password:pass,
balance:0,
uid:Object.keys(users).length+1,
referrals:[],
signals:0,
profit:0,
joinDate:Date.now()
};

inviter.referrals.push(email);
currentUser=email;
updateBalance();
authModal.style.display="none";
}

save();
}

function updateBalance(){

if(!currentUser)return;

let user=users[currentUser];

balance.innerText=user.balance.toFixed(2);
profitBox.innerText="Profit Signals: "+user.profit.toFixed(2)+" USDT";

checkMonthlyReset();
}

function checkMonthlyReset(){

let user=users[currentUser];
let days=(Date.now()-user.joinDate)/(1000*60*60*24);

if(days>=30){
user.signals=0;
user.profit=0;
user.joinDate=Date.now();
save();
}
}

function showDeposit(){
if(!currentUser)return alert("Login first");
depositModal.style.display="flex";
}

function showWithdraw(){
if(!currentUser)return alert("Login first");
withdrawModal.style.display="flex";
}

function deposit(){

if(!users[currentUser].admin){
alert("Admin only deposit");
depositModal.style.display="none";
return;
}

let amount=parseFloat(depositAmount.value);
if(isNaN(amount))return;

users[currentUser].balance+=amount;
addHistory("Deposit",amount);
save();
updateBalance();
depositModal.style.display="none";
}

function withdrawConfirm(){

let amount=parseFloat(withdrawAmount.value);
if(isNaN(amount))return;

if(amount>users[currentUser].balance)return alert("Insufficient");

users[currentUser].balance-=amount;
addHistory("Withdraw",amount);
save();
updateBalance();
withdrawModal.style.display="none";
}

function invite(){
if(!currentUser)return alert("Login first");
alert("Referral code: "+users[currentUser].uid);
}

function recharge(){alert("Admin only");}
function cert(){alert("Verified");}

function addHistory(type,amount){
historyLog.push({type,amount,date:new Date().toLocaleString()});
renderHistory();
}

function renderHistory(){
history.innerHTML="<h4>Recent Activities</h4>";
historyLog.slice().reverse().forEach(e=>{
let div=document.createElement("div");
div.innerHTML=`<span>${e.date}</span><span>${e.type}</span><span>${e.amount.toFixed(2)}</span>`;
history.appendChild(div);
});
}

function save(){
localStorage.setItem("users",JSON.stringify(users));
}

/* PRICE SIMULATION */
setInterval(()=>{
novacoinPrice.innerText=(1+Math.random()).toFixed(2);
btc.innerText=(80000+Math.random()*2000).toFixed(2);
eth.innerText=(4000+Math.random()*500).toFixed(2);
},4000);

/* SIGNAL PROFIT */
setInterval(()=>{

if(!currentUser)return;

let hour=new Date().getHours();

if([8,11,13].includes(hour)){

let profit=Math.random()*5;

users[currentUser].profit+=profit;
users[currentUser].signals++;

addHistory("Signal Profit",profit);
save();
updateBalance();

alert("Signal profit +"+profit.toFixed(2)+" USDT");

}

},60000);

</script>

</body>
</html>
